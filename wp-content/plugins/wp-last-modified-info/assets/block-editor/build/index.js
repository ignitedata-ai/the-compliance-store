(()=>{"use strict";var e,t={847:()=>{const e=window.wp.plugins,t=(Math.pow(10,8),6e4),o=36e5,i=Symbol.for("constructDateFrom");function n(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&i in e?e[i](t):e instanceof Date?new e.constructor(t):new Date(t)}function r(e,t){return n(t||e,e)}function a(e,t){const o=r(e,t?.in);return o.setDate(1),o.setHours(0,0,0,0),o}function s(e,t){const o=r(e,t?.in),i=o.getMonth();return o.setFullYear(o.getFullYear(),i+1,0),o.setHours(23,59,59,999),o}const d={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,c=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function f(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}const m=[31,null,31,30,31,30,31,31,30,31,30,31];function w(e){return e%400==0||e%4==0&&e%100!=0}const g=window.wp.i18n,h=window.wp.data,_=window.wp.element,D=window.wp.editor,v=window.wp.date,b=window.wp.components,x=window.wp.blockEditor,N=window.wp.coreData,C=(0,_.forwardRef)(({icon:e,size:t=24,...o},i)=>(0,_.cloneElement)(e,{width:t,height:t,...o,ref:i})),T=window.wp.primitives,y=window.ReactJSXRuntime,j=(0,y.jsx)(T.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)(T.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z"})}),M=(0,y.jsx)(T.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)(T.Path,{d:"M20.7 12.7s0-.1-.1-.2c0-.2-.2-.4-.4-.6-.3-.5-.9-1.2-1.6-1.8-.7-.6-1.5-1.3-2.6-1.8l-.6 1.4c.9.4 1.6 1 2.1 1.5.6.6 1.1 1.2 1.4 1.6.1.2.3.4.3.5v.1l.7-.3.7-.3Zm-5.2-9.3-1.8 4c-.5-.1-1.1-.2-1.7-.2-3 0-5.2 1.4-6.6 2.7-.7.7-1.2 1.3-1.6 1.8-.2.3-.3.5-.4.6 0 0 0 .1-.1.2s0 0 .7.3l.7.3V13c0-.1.2-.3.3-.5.3-.4.7-1 1.4-1.6 1.2-1.2 3-2.3 5.5-2.3H13v.3c-.4 0-.8-.1-1.1-.1-1.9 0-3.5 1.6-3.5 3.5s.6 2.3 1.6 2.9l-2 4.4.9.4 7.6-16.2-.9-.4Zm-3 12.6c1.7-.2 3-1.7 3-3.5s-.2-1.4-.6-1.9L12.4 16Z"})}),S=()=>{var e;const[i,T]=(0,_.useState)(null),{timezone:S={},formats:P={}}=null!==(e=(0,v.getSettings)())&&void 0!==e?e:{},k=(0,_.useMemo)(()=>{var e;return/(^|[^\\])a/i.test(null!==(e=P.time)&&void 0!==e?e:"")},[P.time]),{date:F,modifiedDate:I,postStatus:O,postType:E,postMeta:z,postId:H}=(0,h.useSelect)(e=>({date:e("core/editor").getEditedPostAttribute("date"),modifiedDate:e("core/editor").getEditedPostAttribute("modified"),postStatus:e("core/editor").getEditedPostAttribute("status"),postType:e("core/editor").getCurrentPostType(),postMeta:e("core/editor").getEditedPostAttribute("meta"),postId:e("core/editor").getCurrentPostId()}),[]),U=()=>{const e=(0,v.getDate)(I),t=S.abbr&&isNaN(Number(S.abbr))?S.abbr:`UTC${Number(S.offset)<0?"":"+"}${null!==(o=S.offsetFormatted)&&void 0!==o?o:S.offset}`;var o;const i=(0,v.dateI18n)(
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
(0,g._x)("F j, Y g:i a","post modified full date format","wp-last-modified-info"),e);return(0,g.isRTL)()?`${t} ${i}`:`${i} ${t}`},[Y,$]=(0,_.useState)(()=>{const e=(0,v.getDate)(I);return e instanceof Date&&!isNaN(e)?a(e):a(new Date)}),Z=(0,_.useMemo)(()=>({anchor:i,"aria-label":(0,g.__)("Change modified date","wp-last-modified-info"),placement:"left-middle",offset:36,shift:!0}),[i]),B=(0,h.useSelect)(e=>e(N.store).getEntityRecords("postType",E,{status:"publish",after:a(Y).toISOString(),before:s(Y).toISOString(),exclude:[H],per_page:100,_fields:"id,modified"}),[Y,E,H]),A=(0,_.useMemo)(()=>(B||[]).map(({modified:e})=>({date:new Date(e)})),[B]),{editPost:R}=(0,h.useDispatch)("core/editor");if(["auto-draft","future"].includes(O))return null;const V="yes"===z?._lmt_disable,L="yes"===z?._lmt_disableupdate,G="undefined"!=typeof wplmiBlockEditor&&Array.isArray(wplmiBlockEditor.postTypes)&&wplmiBlockEditor.postTypes.includes(E)&&wplmiBlockEditor.isEnabled,J=(()=>{const e=new Date;if(!(e=>e instanceof Date&&!isNaN(e)&&(Number(S.offset)||0)===e.getTimezoneOffset()/60*-1)(e))return U();const t=(0,v.getDate)(I);return i=e,(o=t)instanceof Date&&i instanceof Date&&o.getDate()===i.getDate()&&o.getMonth()===i.getMonth()&&o.getFullYear()===i.getFullYear()?(0,g.sprintf)(
// translators: %s: Time of day the post is modified.
// translators: %s: Time of day the post is modified.
(0,g.__)("Today at %s"),
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
(0,v.dateI18n)((0,g._x)("g:i a","post modified time format","wp-last-modified-info"),t)):t.getFullYear()===e.getFullYear()?(0,v.dateI18n)(
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
(0,g._x)("F j g:i a","post modified date format without year","wp-last-modified-info"),t):(0,v.dateI18n)(
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
(0,g._x)("F j, Y g:i a","post modified full date format","wp-last-modified-info"),t);var o,i})(),W=U();return(0,y.jsx)(D.PluginPostStatusInfo,{className:"wplmi-modified-edit",children:(0,y.jsxs)(b.__experimentalHStack,{className:"editor-post-panel__row",ref:T,children:[(0,y.jsxs)("div",{className:"editor-post-panel__row-label",children:[(0,g.__)("Modified","wp-last-modified-info"),L&&(0,y.jsx)(C,{icon:j,size:18}),G&&V&&(0,y.jsx)(C,{icon:M,size:18})]}),(0,y.jsx)("div",{className:"editor-post-panel__row-control",children:(0,y.jsx)(b.Dropdown,{popoverProps:Z,focusOnMount:!0,className:"editor-post-schedule__panel-dropdown",contentClassName:"editor-post-schedule__dialog",renderToggle:({onToggle:e,isOpen:t})=>(0,y.jsx)(b.Button,{size:"compact",className:"editor-post-schedule__dialog-toggle",variant:"tertiary",tooltipPosition:"middle left",onClick:e,"aria-label":(0,g.sprintf)((0,g.__)("Change modified date: %s","wp-last-modified-info"),J),label:W,showTooltip:J!==W,"aria-expanded":t,children:J}),renderContent:({onClose:e})=>(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(x.__experimentalInspectorPopoverHeader,{title:(0,g.__)("Modified","wp-last-modified-info"),onClose:e}),G&&(0,y.jsx)(b.CheckboxControl,{label:(0,g.__)("Hide on Frontend","wp-last-modified-info"),checked:V,onChange:()=>R({meta:{_lmt_disable:V?"no":"yes"}}),help:(0,g.__)("Hide post modified data from frontend.","wp-last-modified-info")}),(0,y.jsx)(b.CheckboxControl,{label:(0,g.__)("Lock Modified Date","wp-last-modified-info"),checked:L,onChange:()=>R({meta:{_lmt_disableupdate:L?"no":"yes"}}),help:(0,g.__)("Prevents post modified date changes.","wp-last-modified-info"),__nextHasNoMarginBottom:!0}),!L&&(0,y.jsx)(b.DateTimePicker,{currentDate:I,onChange:e=>R({modified:e}),is12Hour:k,events:A,isInvalidDate:e=>{const t=new Date(e),o=new Date(F);return[t,o].forEach(e=>e.setHours(0,0,0,0)),t<o},dateOrder:(0,g._x)("dmy","modified date order","wp-last-modified-info"),onMonthPreviewed:e=>$(function(e,i){const a=()=>n(i?.in,NaN),s=i?.additionalDigits??2,g=function(e){const t={},o=e.split(d.dateTimeDelimiter);let i;if(o.length>2)return t;if(/:/.test(o[0])?i=o[0]:(t.date=o[0],i=o[1],d.timeZoneDelimiter.test(t.date)&&(t.date=e.split(d.timeZoneDelimiter)[0],i=e.substr(t.date.length,e.length))),i){const e=d.timezone.exec(i);e?(t.time=i.replace(e[1],""),t.timezone=e[1]):t.time=i}return t}(e);let h;if(g.date){const e=function(e,t){const o=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=e.match(o);if(!i)return{year:NaN,restDateString:""};const n=i[1]?parseInt(i[1]):null,r=i[2]?parseInt(i[2]):null;return{year:null===r?n:100*r,restDateString:e.slice((i[1]||i[2]).length)}}(g.date,s);h=function(e,t){if(null===t)return new Date(NaN);const o=e.match(l);if(!o)return new Date(NaN);const i=!!o[4],n=f(o[1]),r=f(o[2])-1,a=f(o[3]),s=f(o[4]),d=f(o[5])-1;if(i)return function(e,t,o){return t>=1&&t<=53&&o>=0&&o<=6}(0,s,d)?function(e,t,o){const i=new Date(0);i.setUTCFullYear(e,0,4);const n=7*(t-1)+o+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+n),i}(t,s,d):new Date(NaN);{const e=new Date(0);return function(e,t,o){return t>=0&&t<=11&&o>=1&&o<=(m[t]||(w(e)?29:28))}(t,r,a)&&function(e,t){return t>=1&&t<=(w(e)?366:365)}(t,n)?(e.setUTCFullYear(t,r,Math.max(n,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!h||isNaN(+h))return a();const _=+h;let D,v=0;if(g.time&&(v=function(e){const i=e.match(c);if(!i)return NaN;const n=p(i[1]),r=p(i[2]),a=p(i[3]);return function(e,t,o){return 24===e?0===t&&0===o:o>=0&&o<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a)?n*o+r*t+1e3*a:NaN}(g.time),isNaN(v)))return a();if(!g.timezone){const e=new Date(_+v),t=r(0,i?.in);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return D=function(e){if("Z"===e)return 0;const i=e.match(u);if(!i)return 0;const n="+"===i[1]?-1:1,r=parseInt(i[2]),a=i[3]&&parseInt(i[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(r*o+a*t):NaN}(g.timezone),isNaN(D)?a():r(_+v+D,i?.in)}(e))})]})})})]})})};(0,e.registerPlugin)("wp-last-modified-info",{render:()=>(0,y.jsx)(S,{}),icon:null})}},o={};function i(e){var n=o[e];if(void 0!==n)return n.exports;var r=o[e]={exports:{}};return t[e](r,r.exports,i),r.exports}i.m=t,e=[],i.O=(t,o,n,r)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,n,r]=e[c],s=!0,d=0;d<o.length;d++)(!1&r||a>=r)&&Object.keys(i.O).every(e=>i.O[e](o[d]))?o.splice(d--,1):(s=!1,r<a&&(a=r));if(s){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,n,r]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,o)=>{var n,r,[a,s,d]=o,l=0;if(a.some(t=>0!==e[t])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(d)var c=d(i)}for(t&&t(o);l<a.length;l++)r=a[l],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},o=globalThis.webpackChunkwp_last_modified_info=globalThis.webpackChunkwp_last_modified_info||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var n=i.O(void 0,[350],()=>i(847));n=i.O(n)})();