(()=>{"use strict";var e,t={20:(e,t,o)=>{var n=o(609),r=Symbol.for("react.element"),i=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var n,d={},l=null,c=null;for(n in void 0!==o&&(l=""+o),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(d[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===d[n]&&(d[n]=t[n]);return{$$typeof:r,type:e,key:l,ref:c,props:d,_owner:a.current}}},609:e=>{e.exports=window.React},720:(e,t,o)=>{var n=o(609);const r=window.wp.plugins,i=(Math.pow(10,8),6e4),a=36e5,s=Symbol.for("constructDateFrom");function d(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&s in e?e[s](t):e instanceof Date?new e.constructor(t):new Date(t)}function l(e,t){return d(t||e,e)}function c(e,t){const o=l(e,t?.in);return o.setDate(1),o.setHours(0,0,0,0),o}function u(e,t){const o=l(e,t?.in),n=o.getMonth();return o.setFullYear(o.getFullYear(),n+1,0),o.setHours(23,59,59,999),o}const f={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},m=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,p=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,w=/^([+-])(\d{2})(?::?(\d{2}))?$/;function g(e){return e?parseInt(e):1}function _(e){return e&&parseFloat(e.replace(",","."))||0}const h=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}const D=window.wp.i18n,b=window.wp.data,N=window.wp.element,y=window.wp.editor,C=window.wp.date,T=window.wp.components,E=window.wp.blockEditor,x=window.wp.coreData,S=(0,N.forwardRef)((function({icon:e,size:t=24,...o},n){return(0,N.cloneElement)(e,{width:t,height:t,...o,ref:n})})),O=window.wp.primitives;var P=o(848);const M=(0,P.jsx)(O.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,P.jsx)(O.Path,{d:"M17 10h-1.2V7c0-2.1-1.7-3.8-3.8-3.8-2.1 0-3.8 1.7-3.8 3.8v3H7c-.6 0-1 .4-1 1v8c0 .6.4 1 1 1h10c.6 0 1-.4 1-1v-8c0-.6-.4-1-1-1zM9.8 7c0-1.2 1-2.2 2.2-2.2 1.2 0 2.2 1 2.2 2.2v3H9.8V7zm6.7 11.5h-9v-7h9v7z"})}),k=(0,P.jsx)(O.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,P.jsx)(O.Path,{d:"M20.7 12.7s0-.1-.1-.2c0-.2-.2-.4-.4-.6-.3-.5-.9-1.2-1.6-1.8-.7-.6-1.5-1.3-2.6-1.8l-.6 1.4c.9.4 1.6 1 2.1 1.5.6.6 1.1 1.2 1.4 1.6.1.2.3.4.3.5v.1l.7-.3.7-.3Zm-5.2-9.3-1.8 4c-.5-.1-1.1-.2-1.7-.2-3 0-5.2 1.4-6.6 2.7-.7.7-1.2 1.3-1.6 1.8-.2.3-.3.5-.4.6 0 0 0 .1-.1.2s0 0 .7.3l.7.3V13c0-.1.2-.3.3-.5.3-.4.7-1 1.4-1.6 1.2-1.2 3-2.3 5.5-2.3H13v.3c-.4 0-.8-.1-1.1-.1-1.9 0-3.5 1.6-3.5 3.5s.6 2.3 1.6 2.9l-2 4.4.9.4 7.6-16.2-.9-.4Zm-3 12.6c1.7-.2 3-1.7 3-3.5s-.2-1.4-.6-1.9L12.4 16Z"})}),F=()=>{const[e,t]=(0,N.useState)(null),{timezone:o,formats:r}=(0,C.getSettings)(),s=/a(?!\\)/i.test(r.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join("")),{date:O,modifiedDate:P,postStatus:F,postType:I,postMeta:H}=(0,b.useSelect)((e=>({date:e("core/editor").getEditedPostAttribute("date"),modifiedDate:e("core/editor").getEditedPostAttribute("modified"),postStatus:e("core/editor").getEditedPostAttribute("status"),postType:e("core/editor").getCurrentPostType(),postMeta:e("core/editor").getEditedPostAttribute("meta")}))),U=()=>{const e=(0,C.getDate)(P),t=o.abbr&&isNaN(Number(o.abbr))?o.abbr:`UTC${o.offset<0?"":"+"}${o.offsetFormatted}`,n=(0,C.dateI18n)(
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
(0,D._x)("F j, Y g:i a","post modified full date format","wp-last-modified-info"),e);return(0,D.isRTL)()?`${t} ${n}`:`${n} ${t}`},{editPost:j}=(0,b.useDispatch)("core/editor"),[z,Y]=(0,N.useState)(c(new Date(P))),$=(0,N.useMemo)((()=>({anchor:e,"aria-label":(0,D.__)("Change modified date"),placement:"left-middle",offset:36,shift:!0})),[e]),R=(0,b.useSelect)((e=>e(x.store).getEntityRecords("postType",I,{status:"publish",after:c(z).toISOString(),before:u(z).toISOString(),exclude:[e("core/editor").getCurrentPostId()],per_page:100,_fields:"id,modified"})),[z,I]),Z=(0,N.useMemo)((()=>(R||[]).map((({modified:e})=>({date:new Date(e)})))),[R]);if(["auto-draft","future"].includes(F))return null;const B="yes"===H?._lmt_disable,L="yes"===H?._lmt_disableupdate,A=wplmiBlockEditor.postTypes.includes(I)&&wplmiBlockEditor.isEnabled,V=(()=>{const e=new Date;if(!(e=>Number(o.offset)===e.getTimezoneOffset()/60*-1)(e))return U();const t=(0,C.getDate)(P);return r=e,(n=t).getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()?sprintf(
// translators: %s: Time of day the post is modified.
// translators: %s: Time of day the post is modified.
(0,D.__)("Today at %s"),
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
(0,C.dateI18n)((0,D._x)("g:i a","post modified time format","wp-last-modified-info"),t)):t.getFullYear()===e.getFullYear()?(0,C.dateI18n)(
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
// translators: If using a space between 'g:i' and 'a', use a non-breaking space.
(0,D._x)("F j g:i a","post modified date format without year","wp-last-modified-info"),t):(0,C.dateI18n)(
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
// translators: Use a non-breaking space between 'g:i' and 'a' if appropriate.
(0,D._x)("F j, Y g:i a","post modified full date format","wp-last-modified-info"),t);var n,r})(),G=U();return(0,n.createElement)(y.PluginPostStatusInfo,{className:"wplmi-modified-edit"},(0,n.createElement)(T.__experimentalHStack,{className:"editor-post-panel__row",ref:t},(0,n.createElement)("div",{className:"editor-post-panel__row-label"},(0,D.__)("Modified","wp-last-modified-info"),L&&(0,n.createElement)(S,{icon:M,size:18}),A&&B&&(0,n.createElement)(S,{icon:k,size:18})),(0,n.createElement)("div",{className:"editor-post-panel__row-control"},(0,n.createElement)(T.Dropdown,{popoverProps:$,focusOnMount:!0,className:"editor-post-schedule__panel-dropdown",contentClassName:"editor-post-schedule__dialog",renderToggle:({onToggle:e,isOpen:t})=>(0,n.createElement)(T.Button,{size:"compact",className:"editor-post-schedule__dialog-toggle",variant:"tertiary",tooltipPosition:"middle left",onClick:e,"aria-label":sprintf(
// translators: %s: Current post modified date.
// translators: %s: Current post modified date.
(0,D.__)("Change modified date: %s"),V),label:G,showTooltip:V!==G,"aria-expanded":t},V),renderContent:({onClose:e})=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(E.__experimentalInspectorPopoverHeader,{title:(0,D.__)("Modified","wp-last-modified-info"),onClose:e}),A&&(0,n.createElement)(T.CheckboxControl,{label:(0,D.__)("Hide on Frontend","wp-last-modified-info"),checked:B,onChange:()=>j({meta:{_lmt_disable:B?"no":"yes"}}),help:(0,D.__)("Hide post modified data from frontend.","wp-last-modified-info")}),(0,n.createElement)(T.CheckboxControl,{label:(0,D.__)("Lock Modified Date","wp-last-modified-info"),checked:L,onChange:()=>j({meta:{_lmt_disableupdate:L?"no":"yes"}}),help:(0,D.__)("Prevents post modified date changes.","wp-last-modified-info"),__nextHasNoMarginBottom:L}),!L&&(0,n.createElement)(T.DateTimePicker,{currentDate:P,onChange:e=>{j({modified:e})},is12Hour:s,events:Z,isInvalidDate:e=>{const t=new Date(e),o=new Date(O);return t.setHours(0,0,0,0),o.setHours(0,0,0,0),t<o},dateOrder:/* translators: Order of day, month, and year. Available formats are 'dmy', 'mdy', and 'ymd'. */ /* translators: Order of day, month, and year. Available formats are 'dmy', 'mdy', and 'ymd'. */
(0,D._x)("dmy","modified date order","wp-last-modified-info"),onMonthPreviewed:e=>Y(function(e,t){const o=()=>d(t?.in,NaN),n=t?.additionalDigits??2,r=function(e){const t={},o=e.split(f.dateTimeDelimiter);let n;if(o.length>2)return t;if(/:/.test(o[0])?n=o[0]:(t.date=o[0],n=o[1],f.timeZoneDelimiter.test(t.date)&&(t.date=e.split(f.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const e=f.timezone.exec(n);e?(t.time=n.replace(e[1],""),t.timezone=e[1]):t.time=n}return t}(e);let s;if(r.date){const e=function(e,t){const o=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(o);if(!n)return{year:NaN,restDateString:""};const r=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((n[1]||n[2]).length)}}(r.date,n);s=function(e,t){if(null===t)return new Date(NaN);const o=e.match(m);if(!o)return new Date(NaN);const n=!!o[4],r=g(o[1]),i=g(o[2])-1,a=g(o[3]),s=g(o[4]),d=g(o[5])-1;if(n)return function(e,t,o){return t>=1&&t<=53&&o>=0&&o<=6}(0,s,d)?function(e,t,o){const n=new Date(0);n.setUTCFullYear(e,0,4);const r=7*(t-1)+o+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+r),n}(t,s,d):new Date(NaN);{const e=new Date(0);return function(e,t,o){return t>=0&&t<=11&&o>=1&&o<=(h[t]||(v(e)?29:28))}(t,i,a)&&function(e,t){return t>=1&&t<=(v(e)?366:365)}(t,r)?(e.setUTCFullYear(t,i,Math.max(r,a)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!s||isNaN(+s))return o();const c=+s;let u,D=0;if(r.time&&(D=function(e){const t=e.match(p);if(!t)return NaN;const o=_(t[1]),n=_(t[2]),r=_(t[3]);return function(e,t,o){return 24===e?0===t&&0===o:o>=0&&o<60&&t>=0&&t<60&&e>=0&&e<25}(o,n,r)?o*a+n*i+1e3*r:NaN}(r.time),isNaN(D)))return o();if(!r.timezone){const e=new Date(c+D),o=l(0,t?.in);return o.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),o.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),o}return u=function(e){if("Z"===e)return 0;const t=e.match(w);if(!t)return 0;const o="+"===t[1]?-1:1,n=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?o*(n*a+r*i):NaN}(r.timezone),isNaN(u)?o():l(c+D+u,t?.in)}(e))}))}))))};(0,r.registerPlugin)("wp-last-modified-info",{render:()=>(0,n.createElement)(F,null),icon:null})},848:(e,t,o)=>{e.exports=o(20)}},o={};function n(e){var r=o[e];if(void 0!==r)return r.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,r,i)=>{if(!o){var a=1/0;for(c=0;c<e.length;c++){for(var[o,r,i]=e[c],s=!0,d=0;d<o.length;d++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(s=!1,i<a&&(a=i));if(s){e.splice(c--,1);var l=r();void 0!==l&&(t=l)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var r,i,[a,s,d]=o,l=0;if(a.some((t=>0!==e[t]))){for(r in s)n.o(s,r)&&(n.m[r]=s[r]);if(d)var c=d(n)}for(t&&t(o);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=globalThis.webpackChunkwp_last_modified_info=globalThis.webpackChunkwp_last_modified_info||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var r=n.O(void 0,[350],(()=>n(720)));r=n.O(r)})();